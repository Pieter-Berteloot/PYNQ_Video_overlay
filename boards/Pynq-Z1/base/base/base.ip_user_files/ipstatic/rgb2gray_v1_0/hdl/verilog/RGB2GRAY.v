// ==============================================================
// RTL generated by Vivado(TM) HLS - High-Level Synthesis from C, C++ and SystemC
// Version: 2016.1
// Copyright (C) 1986-2016 Xilinx, Inc. All Rights Reserved.
// 
// ===========================================================

`timescale 1 ns / 1 ps 

(* CORE_GENERATION_INFO="RGB2GRAY,hls_ip_2016_1,{HLS_INPUT_TYPE=cxx,HLS_INPUT_FLOAT=0,HLS_INPUT_FIXED=0,HLS_INPUT_PART=xc7z020clg400-1,HLS_INPUT_CLOCK=10.000000,HLS_INPUT_ARCH=pipeline,HLS_SYN_CLOCK=9.470000,HLS_SYN_LAT=2,HLS_SYN_TPT=1,HLS_SYN_MEM=0,HLS_SYN_DSP=3,HLS_SYN_FF=64,HLS_SYN_LUT=22}" *)

module RGB2GRAY (
        ap_clk,
        ap_rst_n,
        in_data_TDATA,
        in_data_TVALID,
        in_data_TREADY,
        in_data_TUSER,
        in_data_TLAST,
        out_data_TDATA,
        out_data_TVALID,
        out_data_TREADY,
        out_data_TUSER,
        out_data_TLAST
);

parameter    ap_ST_pp0_stg0_fsm_0 = 1'b1;
parameter    ap_const_lv32_0 = 32'b00000000000000000000000000000000;
parameter    ap_const_lv32_8 = 32'b1000;
parameter    ap_const_lv32_F = 32'b1111;
parameter    ap_const_lv32_10 = 32'b10000;
parameter    ap_const_lv32_17 = 32'b10111;
parameter    ap_const_lv16_96 = 16'b10010110;
parameter    ap_const_lv32_7 = 32'b111;
parameter    ap_const_lv8_FF = 8'b11111111;
parameter    ap_const_lv14_1D = 14'b11101;
parameter    ap_const_lv16_4D = 16'b1001101;

input   ap_clk;
input   ap_rst_n;
input  [23:0] in_data_TDATA;
input   in_data_TVALID;
output   in_data_TREADY;
input  [0:0] in_data_TUSER;
input  [0:0] in_data_TLAST;
output  [7:0] out_data_TDATA;
output   out_data_TVALID;
input   out_data_TREADY;
output  [0:0] out_data_TUSER;
output  [0:0] out_data_TLAST;

reg in_data_TREADY;
reg out_data_TVALID;

reg    ap_rst_n_inv;
reg    in_data_TDATA_blk_n;
(* fsm_encoding = "none" *) reg   [0:0] ap_CS_fsm;
reg    ap_sig_cseq_ST_pp0_stg0_fsm_0;
reg    ap_sig_28;
reg    ap_reg_ppiten_pp0_it1;
reg    ap_reg_ppiten_pp0_it2;
reg    out_data_TDATA_blk_n;
reg   [0:0] in_data_user_V_tmp_reg_222;
reg    ap_sig_ioackin_out_data_TREADY;
reg   [0:0] ap_reg_ppstg_in_data_user_V_tmp_reg_222_pp0_iter1;
reg   [0:0] in_data_last_V_tmp_reg_227;
reg   [0:0] ap_reg_ppstg_in_data_last_V_tmp_reg_227_pp0_iter1;
wire   [7:0] loc_V_fu_103_p1;
reg   [7:0] loc_V_reg_232;
reg   [7:0] loc_V_2_reg_237;
reg   [7:0] ap_reg_ppstg_loc_V_2_reg_237_pp0_iter1;
wire   [15:0] p_Val2_1_fu_131_p2;
reg   [15:0] p_Val2_1_reg_242;
wire   [15:0] grp_fu_205_p3;
reg   [15:0] p_Val2_2_reg_247;
reg    ap_reg_ioackin_out_data_TREADY;
wire   [7:0] loc_V_1_fu_107_p4;
wire   [7:0] p_Val2_1_fu_131_p1;
wire   [15:0] grp_fu_212_p3;
wire   [0:0] tmp_fu_152_p3;
wire   [7:0] tmp_2_fu_159_p1;
wire   [7:0] p_Val2_5_fu_143_p4;
wire   [7:0] p_Val2_6_fu_170_p2;
wire   [0:0] tmp_1_fu_163_p3;
wire   [0:0] tmp_3_fu_176_p3;
wire   [0:0] p_Result_2_not_fu_184_p2;
wire   [0:0] not_carry_fu_190_p2;
wire   [5:0] grp_fu_205_p0;
wire   [7:0] grp_fu_205_p1;
wire   [7:0] grp_fu_212_p0;
wire   [7:0] grp_fu_212_p1;
reg   [0:0] ap_NS_fsm;
wire    ap_sig_pprstidle_pp0;
wire   [13:0] grp_fu_205_p10;
wire   [15:0] grp_fu_212_p10;
wire   [15:0] p_Val2_1_fu_131_p10;

// power-on initialization
initial begin
#0 ap_CS_fsm = 1'b1;
#0 ap_reg_ppiten_pp0_it1 = 1'b0;
#0 ap_reg_ppiten_pp0_it2 = 1'b0;
#0 ap_reg_ioackin_out_data_TREADY = 1'b0;
end

RGB2GRAY_mac_muladd_6ns_8ns_16ns_16_1 #(
    .ID( 1 ),
    .NUM_STAGE( 1 ),
    .din0_WIDTH( 6 ),
    .din1_WIDTH( 8 ),
    .din2_WIDTH( 16 ),
    .dout_WIDTH( 16 ))
RGB2GRAY_mac_muladd_6ns_8ns_16ns_16_1_U0(
    .din0(grp_fu_205_p0),
    .din1(grp_fu_205_p1),
    .din2(p_Val2_1_reg_242),
    .dout(grp_fu_205_p3)
);

RGB2GRAY_mac_muladd_8ns_8ns_16ns_16_1 #(
    .ID( 1 ),
    .NUM_STAGE( 1 ),
    .din0_WIDTH( 8 ),
    .din1_WIDTH( 8 ),
    .din2_WIDTH( 16 ),
    .dout_WIDTH( 16 ))
RGB2GRAY_mac_muladd_8ns_8ns_16ns_16_1_U1(
    .din0(grp_fu_212_p0),
    .din1(grp_fu_212_p1),
    .din2(p_Val2_2_reg_247),
    .dout(grp_fu_212_p3)
);

always @ (posedge ap_clk) begin
    if (ap_rst_n_inv == 1'b1) begin
        ap_CS_fsm <= ap_ST_pp0_stg0_fsm_0;
    end else begin
        ap_CS_fsm <= ap_NS_fsm;
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst_n_inv == 1'b1) begin
        ap_reg_ioackin_out_data_TREADY <= 1'b0;
    end else begin
        if (((1'b1 == ap_reg_ppiten_pp0_it2) & ~(((1'b1 == 1'b1) & (in_data_TVALID == 1'b0)) | ((1'b1 == ap_reg_ppiten_pp0_it2) & (1'b0 == ap_sig_ioackin_out_data_TREADY))))) begin
            ap_reg_ioackin_out_data_TREADY <= 1'b0;
        end else if (((1'b1 == ap_reg_ppiten_pp0_it2) & ~((1'b1 == 1'b1) & (in_data_TVALID == 1'b0)) & (1'b1 == out_data_TREADY))) begin
            ap_reg_ioackin_out_data_TREADY <= 1'b1;
        end
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst_n_inv == 1'b1) begin
        ap_reg_ppiten_pp0_it1 <= 1'b0;
    end else begin
        if (((1'b1 == ap_sig_cseq_ST_pp0_stg0_fsm_0) & ~(((1'b1 == 1'b1) & (in_data_TVALID == 1'b0)) | ((1'b1 == ap_reg_ppiten_pp0_it2) & (1'b0 == ap_sig_ioackin_out_data_TREADY))))) begin
            ap_reg_ppiten_pp0_it1 <= 1'b1;
        end
    end
end

always @ (posedge ap_clk) begin
    if (ap_rst_n_inv == 1'b1) begin
        ap_reg_ppiten_pp0_it2 <= 1'b0;
    end else begin
        if (~(((1'b1 == 1'b1) & (in_data_TVALID == 1'b0)) | ((1'b1 == ap_reg_ppiten_pp0_it2) & (1'b0 == ap_sig_ioackin_out_data_TREADY)))) begin
            ap_reg_ppiten_pp0_it2 <= ap_reg_ppiten_pp0_it1;
        end
    end
end

always @ (posedge ap_clk) begin
    if (((1'b1 == ap_sig_cseq_ST_pp0_stg0_fsm_0) & ~(((1'b1 == 1'b1) & (in_data_TVALID == 1'b0)) | ((1'b1 == ap_reg_ppiten_pp0_it2) & (1'b0 == ap_sig_ioackin_out_data_TREADY))))) begin
        ap_reg_ppstg_in_data_last_V_tmp_reg_227_pp0_iter1 <= in_data_last_V_tmp_reg_227;
        ap_reg_ppstg_in_data_user_V_tmp_reg_222_pp0_iter1 <= in_data_user_V_tmp_reg_222;
        ap_reg_ppstg_loc_V_2_reg_237_pp0_iter1 <= loc_V_2_reg_237;
        in_data_last_V_tmp_reg_227 <= in_data_TLAST;
        in_data_user_V_tmp_reg_222 <= in_data_TUSER;
        loc_V_2_reg_237 <= {{in_data_TDATA[ap_const_lv32_17 : ap_const_lv32_10]}};
        loc_V_reg_232 <= loc_V_fu_103_p1;
        p_Val2_1_reg_242 <= p_Val2_1_fu_131_p2;
    end
end

always @ (posedge ap_clk) begin
    if (((1'b1 == ap_sig_cseq_ST_pp0_stg0_fsm_0) & (1'b1 == ap_reg_ppiten_pp0_it1) & ~(((1'b1 == 1'b1) & (in_data_TVALID == 1'b0)) | ((1'b1 == ap_reg_ppiten_pp0_it2) & (1'b0 == ap_sig_ioackin_out_data_TREADY))))) begin
        p_Val2_2_reg_247 <= grp_fu_205_p3;
    end
end

always @ (*) begin
    if (ap_sig_28) begin
        ap_sig_cseq_ST_pp0_stg0_fsm_0 = 1'b1;
    end else begin
        ap_sig_cseq_ST_pp0_stg0_fsm_0 = 1'b0;
    end
end

always @ (*) begin
    if ((1'b0 == ap_reg_ioackin_out_data_TREADY)) begin
        ap_sig_ioackin_out_data_TREADY = out_data_TREADY;
    end else begin
        ap_sig_ioackin_out_data_TREADY = 1'b1;
    end
end

assign ap_sig_pprstidle_pp0 = 1'b0;

always @ (*) begin
    if (((1'b1 == ap_sig_cseq_ST_pp0_stg0_fsm_0) & (1'b1 == 1'b1))) begin
        in_data_TDATA_blk_n = in_data_TVALID;
    end else begin
        in_data_TDATA_blk_n = 1'b1;
    end
end

always @ (*) begin
    if (((1'b1 == ap_sig_cseq_ST_pp0_stg0_fsm_0) & (1'b1 == 1'b1) & ~(((1'b1 == 1'b1) & (in_data_TVALID == 1'b0)) | ((1'b1 == ap_reg_ppiten_pp0_it2) & (1'b0 == ap_sig_ioackin_out_data_TREADY))))) begin
        in_data_TREADY = 1'b1;
    end else begin
        in_data_TREADY = 1'b0;
    end
end

always @ (*) begin
    if ((1'b1 == ap_reg_ppiten_pp0_it2)) begin
        out_data_TDATA_blk_n = out_data_TREADY;
    end else begin
        out_data_TDATA_blk_n = 1'b1;
    end
end

always @ (*) begin
    if (((1'b1 == ap_reg_ppiten_pp0_it2) & ~((1'b1 == 1'b1) & (in_data_TVALID == 1'b0)) & (1'b0 == ap_reg_ioackin_out_data_TREADY))) begin
        out_data_TVALID = 1'b1;
    end else begin
        out_data_TVALID = 1'b0;
    end
end

always @ (*) begin
    case (ap_CS_fsm)
        ap_ST_pp0_stg0_fsm_0 : begin
            ap_NS_fsm = ap_ST_pp0_stg0_fsm_0;
        end
        default : begin
            ap_NS_fsm = 'bx;
        end
    endcase
end

always @ (*) begin
    ap_rst_n_inv = ~ap_rst_n;
end

always @ (*) begin
    ap_sig_28 = (ap_CS_fsm[ap_const_lv32_0] == 1'b1);
end

assign grp_fu_205_p0 = ap_const_lv14_1D;

assign grp_fu_205_p1 = grp_fu_205_p10;

assign grp_fu_205_p10 = loc_V_reg_232;

assign grp_fu_212_p0 = ap_const_lv16_4D;

assign grp_fu_212_p1 = grp_fu_212_p10;

assign grp_fu_212_p10 = ap_reg_ppstg_loc_V_2_reg_237_pp0_iter1;

assign loc_V_1_fu_107_p4 = {{in_data_TDATA[ap_const_lv32_F : ap_const_lv32_8]}};

assign loc_V_fu_103_p1 = in_data_TDATA[7:0];

assign not_carry_fu_190_p2 = (tmp_3_fu_176_p3 | p_Result_2_not_fu_184_p2);

assign out_data_TDATA = ((not_carry_fu_190_p2[0:0] === 1'b1) ? p_Val2_6_fu_170_p2 : ap_const_lv8_FF);

assign out_data_TLAST = ap_reg_ppstg_in_data_last_V_tmp_reg_227_pp0_iter1;

assign out_data_TUSER = ap_reg_ppstg_in_data_user_V_tmp_reg_222_pp0_iter1;

assign p_Result_2_not_fu_184_p2 = (tmp_1_fu_163_p3 ^ 1'b1);

assign p_Val2_1_fu_131_p1 = p_Val2_1_fu_131_p10;

assign p_Val2_1_fu_131_p10 = loc_V_1_fu_107_p4;

assign p_Val2_1_fu_131_p2 = (ap_const_lv16_96 * p_Val2_1_fu_131_p1);

assign p_Val2_5_fu_143_p4 = {{grp_fu_212_p3[ap_const_lv32_F : ap_const_lv32_8]}};

assign p_Val2_6_fu_170_p2 = (tmp_2_fu_159_p1 + p_Val2_5_fu_143_p4);

assign tmp_1_fu_163_p3 = grp_fu_212_p3[ap_const_lv32_F];

assign tmp_2_fu_159_p1 = tmp_fu_152_p3;

assign tmp_3_fu_176_p3 = p_Val2_6_fu_170_p2[ap_const_lv32_7];

assign tmp_fu_152_p3 = grp_fu_212_p3[ap_const_lv32_7];

endmodule //RGB2GRAY
